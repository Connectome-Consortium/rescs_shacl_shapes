{
  "@id": "connectome-composite-view-01",
  "@type": "CompositeView",
  "sources": [
    {
      "@id": "test-source-01",
      "@type": "ProjectEventStream"
    }
  ],
  "projections": [
    {
      "@id": "connectome-es-projection-dataset-01",
      "@type": "ElasticSearchProjection",
      "mapping": {
        "dynamic": false,
        "properties": {
          "@type": {
            "type": "keyword"
          },
          "name": {
            "type": "text"
          },
          "inLanguage": {
            "type": "text"
          },
          "abstract": {
            "type": "text"
          },
          "abstract_en": {
            "type": "text"
          },
          "abstract_de": {
            "type": "text"
          },
          "abstract_fr": {
            "type": "text"
          },
          "abstract_it": {
            "type": "text"
          }
        }
      },
      "query": "es_projection_query.rq",
      "context": {
        "@base": "http://schema.org/",
        "@vocab": "http://schema.org/",
        "dateCreated": {
          "@type": "http://www.w3.org/2001/XMLSchema#date"
        },
        "dateModified": {
          "@type": "http://www.w3.org/2001/XMLSchema#date"
        },
        "datePublished": {
          "@type": "http://www.w3.org/2001/XMLSchema#date"
        },
        "genre_en": {
          "@id": "genre",
          "@language": "en"
        },
        "genre_de": {
          "@id": "genre",
          "@language": "de"
        },
        "genre_fr": {
          "@id": "genre",
          "@language": "fr"
        },
        "genre_it": {
          "@id": "genre",
          "@language": "it"
        },
        "abstract_en": {
          "@id": "abstract",
          "@language": "en"
        },
        "abstract_de": {
          "@id": "abstract",
          "@language": "de"
        },
        "abstract_fr": {
          "@id": "abstract",
          "@language": "fr"
        },
        "abstract_it": {
          "@id": "abstract",
          "@language": "it"
        },
        "keywords_en": {
          "@id": "keywords",
          "@language": "en"
        },
        "keywords_de": {
          "@id": "keywords",
          "@language": "de"
        },
        "keywords_fr": {
          "@id": "keywords",
          "@language": "fr"
        },
        "keywords_it": {
          "@id": "keywords",
          "@language": "it"
        },
        "url": {
          "@type": "@id"
        }
      },
      "resourceTypes": [
        "http://schema.org/Dataset"
      ],
      "includeMetadata": false
    },
    {
      "@id": "connectome-sparql-projection-dataset-01",
      "@type": "SparqlProjection",
      "query": "PREFIX nxv: <https://bluebrain.github.io/nexus/vocabulary/> CONSTRUCT { {resource_id} ?p ?o . } WHERE { {resource_id} ?p ?o . FILTER(!strstarts(str(?p),str(nxv:)) && ?o != 'validate' && ?o != 'validate@validate.com') }",
      "includeMetadata": false,
      "includeDeprecated": false
    }
  ],
  "rebuildStrategy": {
    "@type": "Interval",
    "value": "30 minutes"
  }
}